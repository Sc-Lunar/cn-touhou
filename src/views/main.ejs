<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>弹幕神乐自制合辑(CN)</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@1.0.2/css/bulma.min.css" />
  <link rel="stylesheet" href="/main.css" />
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
 </head>
 <body>
  <div class="container mt-6 px-4">
  <div class="title-container">
   <h1 class="title">东方弹幕神乐-自制谱面<br>(DankaguLike Server)</h1>
   <div>
    <a target="_blank" href="https://" class="button is-primary" id="btn-submit">投稿(Request new chart)...暂未开放(Not open now)</a>
   </div>
   <div class="select search-options">
    <select id="searchBy" class="select">
     <option value="all">精准搜索(Exactly Searching)</option>
     <option value="from">按出处搜索(By From)</option>
     <option value="name">按标题搜索(By Name)</option>
     <option value="publisher">按提供者搜索(By Publisher)</option>
     <option value="difficulty">按难度搜索(By Difficulty)</option>
    </select>
   </div>
  </div>
  <div class="bgimg"></div>   
  <input type="text" id="search" class="input mb-4" placeholder="点这搜索...(Search for an item...)"/>
  <p id="resultCount">Searched <%= contents.length %> result(s)</p>
   <div class="table-wrapper">
    <table class="table is-striped is-fullwidth">
     <thead>
      <tr>
       <th class="sortable">编号(ID) <span class="sort-arrow"></span></th>
       <th class="sortable">类型<br>(Type) <span class="sort-arrow"></span></th>
       <th>出自<br>(From) <span class="sort-arrow"></span></th>
       <th class="sortable">标题<br>(Title) <span class="sort-arrow"></span></th>
       <th class="sortable">提供者<br>(Publisher) <span class="sort-arrow"></span></th>
       <th class="sortable numeric">下载量<br>(Downloads) <span class="sort-arrow"></span></th>
       <th class="sortable numeric">评分<br>(Score) <span class="sort-arrow"></span></th>
       <th>难度<br>(Difficulty) <span class="sort-arrow"></span></th>
      </tr>
     </thead>
     <tbody>
      <% contents.forEach(content => { %>
       <tr>
        <td><%= content.id %></td>
        <td><%= content.contentType === 0 ? "乐曲(Songs)" : content.contentType=== 1 ? "按键皮肤(NoteSkins)" : content.contentType === 2 ? "打击音效(SoundEffects)": content.contentType === 3 ? "全局脚本(GlobalLua)" : "未检测到(Unknown)" %></td>
        <td>
         <%= content.from === 2 ? "杂" : content.from === 3 ? "旧" : content.from === 4 ? "秘" : content.from === 5 ? "点" : content.from === 6 ? "红" : content.from === 7 ? "妖" : content.from === 8 ? "永" : content.from === 9 ? "花" : content.from === 10 ? "风" : content.from === 11 ? "地" : content.from === 12 ? "船" : content.from === 13 ? "庙" : content.from === 14 ? "辉" : content.from === 15 ? "绀" : content.from === 16 ? "璋" : content.from === 17 ? "鬼" : content.from === 18 ? "虹" : content.from === 19 ? "兽" : "-" %></td>
        <td><%= content.title %></td>
        <td><%= content.publisher %></td>
        <td><%= content.downloadCount %></td>
        <td><%= content.voteAverageScore %></td>
        <td class="difficulty">
         <span class="diff" id="diff-easy"><% if (content.songInfo.difficulties[1] === 0) { %>-<% } else if (content.songInfo.difficulties[1] === -1) { %>X<% } else                                                   { %><%= content.songInfo.difficulties[1] %><% } %></span>   
         <span class="diff" id="diff-normal"><% if (content.songInfo.difficulties[1] === 0) { %>-<% } else if (content.songInfo.difficulties[1] === -1) { %>X<% } else                                                   { %><%= content.songInfo.difficulties[1] %><% } %></span>
         <span class="diff" id="diff-hard"><% if (content.songInfo.difficulties[2] === 0) { %>-<% } else if (content.songInfo.difficulties[2] === -1) { %>X<% } else                                                      { %><%= content.songInfo.difficulties[2] %><% } %></span>
         <span class="diff" id="diff-extra"><% if (content.songInfo.difficulties[3] === 0) { %>-<% } else if (content.songInfo.difficulties[3] === -1) { %>X<% } else                                                      { %><%= content.songInfo.difficulties[3] %><% } %></span>
         <span class="diff" id="diff-lunatic"><% if (content.songInfo.difficulties[4] === 0) { %>-<% } else if (content.songInfo.difficulties[4] === -1) { %>X<% } else{ %><%= content.songInfo.difficulties[4] %><% } %></span>
        </td>
       </tr>
      <% }); %>
     </tbody>
    </table>
   </div>
  </div>
  <script src="./main.js"></script>
 </body>
</html>
